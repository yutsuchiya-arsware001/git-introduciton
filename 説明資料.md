---
marp: true
---

# Gitホスティングサービス導入検討

---

# 目次

1. 導入目的
1. Git, Gitホスティングサービスとは
1. Gitホスティングサービス比較
1. まとめ

---

# 導入目的

現在利用しているバージョン管理システムSVNで発生している諸々の問題を解決し、開発効率の向上、品質の向上を目指す。

---

## 開発におけるSVNの課題

- 新規作成や大きな修正を行う際、ローカルで履歴を持てない
- テレワーク環境下で他メンバーに影響を与えずプログラムを共有する手段がない
- レビューしづらい
- レビューという手順を踏まなくても勝手にコミットできる

---

### ローカルで履歴を持てない

TODO 集中型バージョン管理を説明する絵

- SVNは中央集中型バージョン管理システムであるため、ローカルで作業したものをバックアップする手段がない
- バックアップ代わりに修正途中でコミットした結果、それを読み込んだほかのメンバーの環境が動かなくなることも

---

### テレワーク環境下で他メンバーに影響を与えずプログラムを共有する手段がない

- 同じ理由で、他メンバーの作成したプログラムを共有してほしい場合、一度コミットしてもらうしかない
- サーバが起動しなくなった場合などはコミットしてもらうわけにはいかないので、画面共有で不具合原因調査を行うが、非常に効率が悪い

---

### レビューしづらい
### レビューという手順を踏まなくても勝手にコミットできる

- SVNはただのバージョン管理システムなのでレビューにかかわる機能がない

---

- 新規作成や大きな修正を行う際、ローカルで履歴を持てない
- テレワーク環境下で他メンバーに影響を与えずプログラムを共有する手段がない
- レビューしづらい
- レビューという手順を踏まなくても勝手にコミットできる

**⇒Gitホスティングサービスを導入することで、これらの課題を解決したい**

---

# Git, Gitホスティングサービスとは

---

## Gitとは
### 分散型バージョン管理システム

TODO 分散型バージョン管理を説明する絵

- Gitは分散型バージョン管理システムであるため、ローカルでもバージョン管理が可能
- バックアップ代わりに途中でコミットをする必要がない

**⇒ローカルで履歴を持てないという問題を解決できる**

---

### ブランチ機能

TODO ブランチを説明する絵

- Gitは作業者単位でリモートブランチを作成することが可能
- 別作業者のブランチを取り込むことで、メインのブランチを汚さずにプログラムの共有が可能
- SVNにも同名の機能があるが、Gitのほうがパフォーマンスやマージの精度ではるかに優れている


**⇒テレワーク環境下で他メンバーに影響を与えずプログラムを共有する手段がないという問題を解決できる**

---

### Gitホスティングサービスとは

- Gitを利用したバージョン管理システムのサービスを提供する
- Gitの機能を拡張し、様々な機能を提供している

#### 代表的なサービス
- GitHub
    最も有名なサービス。OSSの開発などで多く利用される
- GitLab
    エンタープライズ用途ではGitHubに並ぶ知名度

---

### 提供している機能
GitHub, GitLabともに提供している機能となります

- ユーザ、グループ管理
    ユーザを任意のグループに割り当て、そのグループ内でのみ参照できるリポジトリを作成可能
- ユーザ権限
    参照のみ、開発者、管理者などの権限を割り当て、リポジトリに対する変更に制限を与えることが可能

---

- レビュー機能
    開発者が作成、変更したプログラムをリポジトリに取り込む際、レビューを強制することが可能
    また、レビュー用のGUIを提供し、ブラウザ上でコードにレビューコメントを挿入可能

    ※サービスごとに呼称が異なる
    - GitHub：プルリクエスト
    - GitLab：マージリクエスト

**⇒レビューしづらい、レビューという手順を踏まなくても勝手にコミットできる**
**といった問題を解決**

---

# Gitホスティングサービス比較

GitHub, GitLabについて以下の観点で調査/比較  
- セキュリティ
- 料金
- 独自機能

---

## GitHub

---

### セキュリティ

#### 前提
クラウド上で提供されるサービスを利用する場合、SAMLによる認証が必須

#### GitHubで提供される認証機能

- SAML
- LDAP(オンプレ)
- AD(オンプレ)

SAMLをサポートしているためセキュリティ要件をみたす

---

### 料金

|プラン|価格(ユーザ/月)|SAML|クラウド|オンプレ|
|---|---|---|---|---|
|Free|$0|なし|○|×|
|Team|$4|なし|○|×|
|Enterprise|$21|あり|○|○|

セキュリティの観点からEnterpriseプランの利用が必要となり、**1ユーザ当たり毎月21ドル必要**

---

### 独自機能

- 必須レビュー
    プルリクエストでは、権限の強いメンバが自分自身のプルリクエストを承認してリポジトリを更新できてしまう。
    この機能があれば、n人以上の承認があった場合のみプルリクエストがマージ可能になる。

---

## GitLab

---

### セキュリティ

#### GitLabで提供される認証機能

- SAML
- LDAP(オンプレ)
- AD(オンプレ)

SAMLをサポートしているためセキュリティ要件をみたす

---

### 料金

#### クラウド
|プラン|価格(ユーザ/月)|SAML|
|---|---|---|
|Free|$0|なし|
|Premium|$19|あり|
|Ultimate|$99|あり|

---

#### オンプレ
|プラン|価格(ユーザ/月)|SAML|LDAP|AD|
|---|---|---|---|---|
|Free|$0|あり|あり|あり|
|Premium|$19|あり|あり|あり|
|Ultimate|$99|あり|あり|あり|

GitHubと異なり、すべてのプランがオンプレ利用可能
オンプレの場合、(必要ないかもしれないが)SAML/LDAP/ADといった認証機能が無料プランから解放される
**Freeプランをオンプレ運用することでコストを抑えつつセキュリティ要件を満たすことが可能**

---

#### オンプレでのコストについて

- GitLabはLinuxのみサポートしているため、LinuxOSを入れたサーバが必要
- MEM8GB, HDD2TB(RAID5)の構成でおよそ20万円
- +月々の電気代

---

#### 独自機能

- なし
    GitLabの無料プランが提供する機能はGitHubの無料プランとほぼ同じ

---

## GitHub vs GitLab

|サービス|サーバの場所|セキュリティ|料金|独自機能|
|---|---|---|---|---|
|GitHub|クラウド|○|$21/ユーザ/月|必須レビュー|
|GitLab|オンプレ|○|サーバ導入費用|-|

---

## クラウド vs オンプレ

||適用プロジェクト|運用・保守|
|---|---|---|
|クラウド|限られる|不要|
|オンプレ|すべて|要|

オンプレは自前での運用保守が必要だが、セキュリティ要件の高いプロジェクトでも利用可能

---

# まとめ

- Gitホスティングサービスを導入することで開発における課題を解決できる
- GitHub, GitLabともにセキュリティ要件をみたす
- GitHubではセキュリティ要件を満たすために$21/ユーザ/月必要であり、コストに見合う機能が提供されているとは言えない
- GitLabはコストを抑えつつ必要な機能がそろっている

**⇒GitLab(Freeプラン、オンプレ)の導入を検討お願いします**

---

# 以前の検討会で課題としていたケースに対する方針

## 必須レビュー

TODO 上手い言い訳


## ドキュメント管理
- GitLab導入後、別途検討していただきたい

